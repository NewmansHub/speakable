!function(t,s){"use strict";var r={selector:".spkbl",insert:"before"},e={play:"Text vorlesen",pause:"Pause",progress:"Fortschritt",stop:"Schlie√üen"},o=[],i=new SpeechSynthesisUtterance;speechSynthesis.addEventListener("voiceschanged",function(){o=speechSynthesis.getVoices(),i.voice=o.find(function(t){return!0}),i.lang="de-DE",i.volume=1,i.pitch=1,i.rate=1});function n(t,e){this.element=t,this.options=e,this.text=this.element.textContent,this._player=null,this._controls={},this._buildPlayer(),this._injectPlayer()}n.prototype._buildPlayer=function(){this._player=s.createElement("div"),this._player.className="spkbl-player spkbl-player--inactive",this._player.role="group",this._controls.play=s.createElement("button"),this._controls.play.type="button",this._controls.play.className="spkbl-ctrl spkbl-ctrl--play",this._controls.play.addEventListener("click",this.play.bind(this)),this._controls.play.appendChild(s.createTextNode(e.play)),this._player.appendChild(this._controls.play),this._controls.pause=s.createElement("button"),this._controls.pause.type="button",this._controls.pause.className="spkbl-ctrl spkbl-ctrl--pause",this._controls.pause.addEventListener("click",this.pause.bind(this)),this._controls.pause.appendChild(s.createTextNode(e.pause)),this._controls.pause.setAttribute("aria-pressed","false"),this._player.appendChild(this._controls.pause),this._controls.progress=s.createElement("input"),this._controls.progress.type="range",this._controls.progress.className="spkbl-ctrl spkbl-ctrl--progress",this._controls.progress.min="0",this._controls.progress.max="100",this._controls.progress.value="0",this._controls.progress.className="spkbl-ctrl spkbl-ctrl--progress",this._controls.progress.addEventListener("change",this.progress.bind(this)),this._controls.progress.setAttribute("aria-label",e.progress),this._player.appendChild(this._controls.progress),this._controls.stop=s.createElement("button"),this._controls.stop.type="button",this._controls.stop.className="spkbl-ctrl spkbl-ctrl--stop",this._controls.stop.addEventListener("click",this.stop.bind(this)),this._controls.stop.appendChild(s.createTextNode(e.stop)),this._player.appendChild(this._controls.stop)},n.prototype.play=function(t){var e=this;this._player.classList.add("spkbl-player--active"),this._player.classList.remove("spkbl-player--inactive"),this._controls.pause.focus(),speechSynthesis.cancel(),i.text=this.text,i.onend=this.stop.bind(this),i.onboundary=function(t){return console.log(t.name,e.text.substr(t.charIndex,t.charLength))},speechSynthesis.speak(i)},n.prototype.pause=function(t){speechSynthesis.pause(),speechSynthesis.resume()},n.prototype.progress=function(t){},n.prototype.stop=function(t){this._player.classList.add("spkbl-player--inactive"),this._player.classList.remove("spkbl-player--active"),this._controls.play.focus(),speechSynthesis.cancel()},n.prototype._injectPlayer=function(){if("function"!=typeof this.options.insert)switch(this.options.insert){case"before":this.element.parentNode.insertBefore(this._player,this.element);break;case"after":this.element.parentNode.insertBefore(this._player,this.element.nextSibling);break;default:this.element.insertBefore(this._player,this.element.firstChild)}else this.options.insert(this.element,this._player)},n.init=function(t){void 0===t&&(t={});var e=Object.assign(r,t),t=e.selector||"";return t.length?Array.from(s.querySelectorAll(t)).map(function(t){return new n(t,e)}):[]},"undefined"!=typeof exports?exports.Speakable=n:t.Speakable=n}("undefined"!=typeof global?global:window,document);